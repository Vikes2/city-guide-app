{% extends 'base.html' %} {% load staticfiles %} {% block title%} City Guide {% endblock %}  {% block body %}
<div class="container-fluid px-0">
  <div clas="row">
    <div id="carouselExampleIndicators" class="carousel slide mx-auto" data-ride="carousel">
      <ol class="carousel-indicators">
        <li data-target="#carouselExampleIndicators" data-slide-to="0" class="active"></li>
        <li data-target="#carouselExampleIndicators" data-slide-to="1"></li>
      </ol>
      <div class="carousel-inner">
        <div class="carousel-item active">
          <img class="d-block w-100" src="{% static 'images/slider/slider1.png' %}" alt="First slide">
        </div>
        <div class="carousel-item">
          <img class="d-block w-100" src="{% static 'images/slider/slider1.png' %}" alt="Second slide">
        </div>
      </div>
      <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="sr-only">Previous</span>
      </a>
      <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="sr-only">Next</span>
      </a>
    </div>
  </div>

  <div id="site-info">
    <div class="container">
      <div class="row">
        <div class="col">
          <h1 class="text-light">
            Jak to działa?
          </h1>
          <p class="text-light tourDesc">
            <small>
              Ta strona jest super i wgl. Myśle że dej pan pięć bo somsiad bedzie zazdrosny a o to chodzi. Gdzie jest Tomasz? Bo nie chciałąś
              w dupe to masz. No i Cisniemy z Inwokacją.
            </small>
          </p>
          <p class="text-light tourDesc">
            <small>
              Litwo! Ojczyzno moja! Ty jesteś jak zdrowie, Ile cię trzeba cenić, ten tylko się dowie, Kto cię stracił. Dziś piękność twą
              w całej ozdobie Widzę i opisuję, bo tęsknię po tobie Panno święta, co Jasnej bronisz Częstochowy I w Ostrej
              świecisz Bramie! Ty, co gród zamkowy Nowogródzki ochraniasz z jego wiernym ludem! Jak mnie dziecko do zdrowia
              powróciłaś cudem, (Gdy od płaczącej matki pod Twoją opiekę Ofiarowany, martwą podniosłem powiekę I zaraz mogłem
              pieszo do Twych świątyń progu Iść za wrócone życie podziękować Bogu), Tak nas powrócisz cudem na Ojczyzny łono.
              Tymczasem przenoś moją duszę utęsknioną Do tych pagórków leśnych, do tych łąk zielonych, Szeroko nad błękitnym
              Niemnem rozciągnionych; Do tych pól malowanych zbożem rozmaitem, Wyzłacanych pszenicą, posrebrzanych żytem;
              Gdzie bursztynowy świerzop, gryka jak śnieg biała, Gdzie panieńskim rumieńcem dzięcielina pała, A wszystko
              przepasane jakby wstęgą, miedzą Zieloną, na niej z rzadka ciche grusze siedz
            </small>
          </p>
        </div>
      </div>

    </div>
  </div>
</div>
<div class="container standard-container mt-0">
  <div class="row">
    <div class="col">
      <div id="routes">
        <h2>Przykładowe trasy</h2>
        {% for tour in tours %}
        <div class="row mt-5">
          <div class="col">
            <div class="map" id="map-{{ tour.tour.id }}" data-tour-id=" {{ tour.tour.id }}" data-url="{% url 'city_guide:planner' tour.tour.id %}" style="height: 100%"></div>
          </div>
          <div class="col-7">
            <div class="row">
              <div class="col">
                <h1>{{tour.tour.name}}</h1>
              </div>
            </div>
            <div class="row">
              <div class="col">
                <span class="fontForAll">
                  <small>
                    <i class="fa fa-money-bill-alt "></i> {{tour.cost}}
                  </small>
                </span>
              </div>
              <div class="col-9">
                <span class="fontForAll">
                  <small>
                    <i class="fa fa-clock"></i> {{tour.time}}
                  </small>
                </span>
              </div>
            </div>
            <div class="row mt-3">
              <div class="col">
                <p class="tourDesc">
                  <small>
                    {{tour.tour.description}}
                  </small>
                </p>
              </div>
            </div>
            <div class="row">
              <div class="col mt-3">
                <p>
                  <i class="fa fa-university"></i>
                  <span class="fontForAll">
                    <small>Lista atrakcji</small>
                  </span>
                </p>
              </div>
            </div>
            <div class="row">
              <div class="col exampleTripAttr">
                <ul class="list-group mb-3">
                  <small>
                    {% for attraction in tour.attractions %}
                    <a href="{% url 'city_guide:attraction' attraction.id %}" class="list-group-item list-group-item-action">{{attraction.name}}</a>
                    {% endfor %}
                  </small>
                </ul>
              </div>
            </div>
            <div class="row">
              <div class="col">
                <a href="{% url 'city_guide:planner' tour.tour.id %}">
                  <button type="button" class="btn btn-light float-right">
                    Przejdz do trasy
                  </button>
                </a>
              </div>
            </div>
          </div>
        </div>
        {% endfor %}
      </div>
    </div>
  </div>
</div>
{% endblock %}

{% block javascripts %}
{{ block.super }}
<script>
  var waypts;
  var mapId;
  var dirty = false;

  function waypoint(data){
    waypts = {};
    waypts = data;
    transport = "DRIVING";
  }
  $('.map').each(function(){
    let tourId = $(this).attr("data-tour-id");
    let mapId = $(this).attr("id");
    $.ajax({
      url : $(this).attr('data-url')
    }).done(function(data){
      console.log(mapId);
      waypoint(data);
      init(data, mapId);
      //d();
    });
  });
  //let mapId = 'map';
  //let waypts = "{{ waypoints }}";
  //waypts = JSON.parse(waypts.replace(/&quot;/g, "\""));
</script>
<script src="{% static 'js/map.js' %}"></script>
<script>
  //fuu("map-4");
</script>
<script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCYXIhgWd59IDdrJoO38Tz2hbyoYw0u9TU"></script> 
<script>

</script>
{% endblock %}